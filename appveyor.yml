image: Visual Studio 2017
environment:
  DOCKER_TARGET: simaos/nanopsbuild
  DOCKER_USER:
    secure: 09M6/EHaWHd+zNyhVD2LNQ==
  DOCKER_PASS:
    secure: gvgvfMOklGvBlsbXpw68WQ==
install:
  - docker version
build_script:
  - docker build -t $env:DOCKER_TARGET -f Dockerfile
test_script:
  - echo DOCKER_TARGET is $env:DOCKER_TARGET
  - docker run $env:DOCKER_TARGET
deploy_script:
  - docker login -u="$env:DOCKER_USER" -p="$env:DOCKER_PASS"
  - docker push $env:DOCKER_TARGET
